# Partners in Biz Schema

# Users
type User @table {
  id: String! @col(name: "id")
  email: String! @col(name: "email", dataType: "varchar(255)")
  display_name: String @col(name: "display_name", dataType: "varchar(100)")
  photo_url: String @col(name: "photo_url")
  created_at: Timestamp! @default(expr: "request.time")
  updated_at: Timestamp! @default(expr: "request.time")
}

# Workspaces
type Workspace @table {
  id: UUID! @default(expr: "uuidV4()")
  name: String! @col(name: "name", dataType: "varchar(100)")
  description: String @col(name: "description")
  logo_url: String @col(name: "logo_url")
  created_by: String! @col(name: "created_by")
  created_at: Timestamp! @default(expr: "request.time")
  updated_at: Timestamp! @default(expr: "request.time")
}

# Profiles
type Profile @table {
  id: UUID! @default(expr: "uuidV4()")
  user_id: String! @col(name: "user_id")
  name: String! @col(name: "name", dataType: "varchar(100)")
  bio: String @col(name: "bio")
  avatar_url: String @col(name: "avatar_url")
  skills: [String] @col(name: "skills")
  interests: [String] @col(name: "interests")
  is_default: Boolean! @default(value: false)
  created_at: Timestamp! @default(expr: "request.time")
  updated_at: Timestamp! @default(expr: "request.time")
}

# Workspace Members (many-to-many relationship)
type WorkspaceMember @table(name: "workspace_members", key: ["workspace_id", "user_id"]) {
  workspace_id: UUID!
  user_id: String!
  profile_id: UUID
  role: String! @col(name: "role", dataType: "varchar(20)")
  joined_at: Timestamp! @default(expr: "request.time")
}

# Workspace Invitations
type WorkspaceInvitation @table {
  id: UUID! @default(expr: "uuidV4()")
  workspace_id: UUID!
  email: String! @col(name: "email", dataType: "varchar(255)")
  role: String! @col(name: "role", dataType: "varchar(20)")
  invited_by: String!
  status: String! @col(name: "status", dataType: "varchar(20)")
  created_at: Timestamp! @default(expr: "request.time")
  expires_at: Timestamp
}

# Business Profiles
type BusinessProfile @table {
  id: UUID! @default(expr: "uuidV4()")
  workspace_id: UUID! @unique
  name: String! @col(name: "name", dataType: "varchar(100)")
  industry: String @col(name: "industry", dataType: "varchar(50)")
  description: String @col(name: "description")
  location: String @col(name: "location", dataType: "varchar(100)")
  website: String @col(name: "website", dataType: "varchar(255)")
  employee_count: Int @col(name: "employee_count")
  created_at: Timestamp! @default(expr: "request.time")
  updated_at: Timestamp! @default(expr: "request.time")
}

# Partner Preferences
type PartnerPreferences @table {
  id: UUID! @default(expr: "uuidV4()")
  workspace_id: UUID! @unique
  industries: [String] @col(name: "industries")
  locations: [String] @col(name: "locations")
  min_employee_count: Int @col(name: "min_employee_count")
  max_employee_count: Int @col(name: "max_employee_count")
  skills_needed: [String] @col(name: "skills_needed")
  created_at: Timestamp! @default(expr: "request.time")
  updated_at: Timestamp! @default(expr: "request.time")
}
