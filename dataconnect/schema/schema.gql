# Partners in Biz Schema

# Users
type User @table {
  id: String! @col(name: "id")
  email: String! @col(name: "email", dataType: "varchar(255)")
  displayName: String @col(name: "display_name", dataType: "varchar(100)")
  photoUrl: String @col(name: "photo_url")
  createdAt: Timestamp! @default(expr: "request.time") @col(name: "created_at")
  updatedAt: Timestamp! @default(expr: "request.time") @col(name: "updated_at")
}

# Workspaces
type Workspace @table {
  id: UUID! @default(expr: "uuidV4()")
  name: String! @col(name: "name", dataType: "varchar(100)")
  description: String @col(name: "description")
  logoUrl: String @col(name: "logo_url")
  createdBy: String! @col(name: "created_by")
  createdAt: Timestamp! @default(expr: "request.time") @col(name: "created_at")
  updatedAt: Timestamp! @default(expr: "request.time") @col(name: "updated_at")
}

# Profiles
type Profile @table {
  id: UUID! @default(expr: "uuidV4()")
  userId: String! @col(name: "user_id")
  name: String! @col(name: "name", dataType: "varchar(100)")
  bio: String @col(name: "bio")
  avatarUrl: String @col(name: "avatar_url")
  skills: [String] @col(name: "skills")
  interests: [String] @col(name: "interests")
  isDefault: Boolean! @default(value: false) @col(name: "is_default")
  createdAt: Timestamp! @default(expr: "request.time") @col(name: "created_at")
  updatedAt: Timestamp! @default(expr: "request.time") @col(name: "updated_at")
}

# Workspace Members (many-to-many relationship)
type WorkspaceMember @table(name: "workspace_members", key: ["workspaceId", "userId"]) {
  workspaceId: UUID! @col(name: "workspace_id")
  userId: String! @col(name: "user_id")
  profileId: UUID @col(name: "profile_id")
  role: String! @col(name: "role", dataType: "varchar(20)")
  joinedAt: Timestamp! @default(expr: "request.time") @col(name: "joined_at")
}

# Workspace Invitations
type WorkspaceInvitation @table {
  id: UUID! @default(expr: "uuidV4()")
  workspaceId: UUID! @col(name: "workspace_id")
  email: String! @col(name: "email", dataType: "varchar(255)")
  role: String! @col(name: "role", dataType: "varchar(20)")
  invitedBy: String! @col(name: "invited_by")
  status: String! @col(name: "status", dataType: "varchar(20)")
  createdAt: Timestamp! @default(expr: "request.time") @col(name: "created_at")
  expiresAt: Timestamp @col(name: "expires_at")
}

# Business Profiles
type BusinessProfile @table {
  id: UUID! @default(expr: "uuidV4()")
  workspaceId: UUID! @unique @col(name: "workspace_id")
  name: String! @col(name: "name", dataType: "varchar(100)")
  industry: String @col(name: "industry", dataType: "varchar(50)")
  description: String @col(name: "description")
  location: String @col(name: "location", dataType: "varchar(100)")
  website: String @col(name: "website", dataType: "varchar(255)")
  employeeCount: Int @col(name: "employee_count")
  createdAt: Timestamp! @default(expr: "request.time") @col(name: "created_at")
  updatedAt: Timestamp! @default(expr: "request.time") @col(name: "updated_at")
}

# Partner Preferences
type PartnerPreferences @table {
  id: UUID! @default(expr: "uuidV4()")
  workspaceId: UUID! @unique @col(name: "workspace_id")
  industries: [String] @col(name: "industries")
  locations: [String] @col(name: "locations")
  minEmployeeCount: Int @col(name: "min_employee_count")
  maxEmployeeCount: Int @col(name: "max_employee_count")
  skillsNeeded: [String] @col(name: "skills_needed")
  createdAt: Timestamp! @default(expr: "request.time") @col(name: "created_at")
  updatedAt: Timestamp! @default(expr: "request.time") @col(name: "updated_at")
}
